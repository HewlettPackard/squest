{% with app=object|to_app_name|lower %}
    {% with class=object|to_class_name|lower %}
        {% with perm=app|add:".change_"|add:class %}
            {% has_perm request.user perm object as can_change %}
            <span {% if not can_change %} title="Permission {{ perm }} needed" {% endif %}>
                <a href="{% url app|add:':'|add:class|add:'_edit' object.id %}"
                   class="btn btn-primary{% if not can_change %} disabled{% endif %}">
                    <i class="fas fa-pencil-alt"></i>
                </a>
            </span>
        {% endwith %}
    {% endwith %}
{% endwith %}
